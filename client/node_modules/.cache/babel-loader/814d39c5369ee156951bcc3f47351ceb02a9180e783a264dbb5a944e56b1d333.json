{"ast":null,"code":"var _jsxFileName = \"/home/hoziest/Development/code/phase-5/phase-5-project/client/src/components/Login.js\",\n  _s = $RefreshSig$();\nimport React, { useState } from \"react\";\nimport { useFormik } from \"formik\";\nimport * as yup from \"yup\";\nimport { useHistory } from \"react-router-dom\";\nimport { useDispatch } from \"react-redux\";\nimport { setUser } from \"../features/user/userSlice\";\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nfunction Login() {\n  _s();\n  const [showError, setShowError] = useState(false);\n  const history = useHistory();\n  const dispatch = useDispatch();\n  const formSchema = yup.object().shape({\n    username: yup.string().required(\"Please enter your username\"),\n    password: yup.string().required(\"Please enter your password\")\n  });\n  const formik = useFormik({\n    initialValues: {\n      username: \"\",\n      password: \"\"\n    },\n    validationSchema: formSchema,\n    onSubmit: values => {\n      fetch(\"/login\", {\n        method: \"POST\",\n        headers: {\n          \"Content-Type\": \"application/json\"\n        },\n        body: JSON.stringify(values, null, 2)\n      }).then(r => {\n        if (r.status === 200) {\n          r.json().then(user => {\n            dispatch(setUser(user));\n            history.push(\"/\");\n          });\n        } else if (r.status === 401) {\n          setShowError(true);\n        }\n      });\n    }\n  });\n  return /*#__PURE__*/_jsxDEV(\"div\", {\n    children: [/*#__PURE__*/_jsxDEV(\"h1\", {\n      children: \"Login\"\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 49,\n      columnNumber: 13\n    }, this), /*#__PURE__*/_jsxDEV(\"form\", {\n      onSubmit: formik.handleSubmit,\n      children: [showError ? /*#__PURE__*/_jsxDEV(\"p\", {\n        style: {\n          color: \"red\"\n        },\n        children: \"Invalid username or password\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 51,\n        columnNumber: 30\n      }, this) : null, /*#__PURE__*/_jsxDEV(\"label\", {\n        htmlFor: \"username\",\n        children: \"Username\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 52,\n        columnNumber: 17\n      }, this), /*#__PURE__*/_jsxDEV(\"input\", {\n        type: \"text\",\n        name: \"username\",\n        autoComplete: \"off\",\n        value: formik.values.username,\n        onChange: formik.handleChange,\n        onBlur: formik.handleBlur\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 53,\n        columnNumber: 17\n      }, this), formik.touched.username && formik.errors.username ? /*#__PURE__*/_jsxDEV(\"p\", {\n        style: {\n          color: \"red\"\n        },\n        children: formik.errors.username\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 61,\n        columnNumber: 70\n      }, this) : null, /*#__PURE__*/_jsxDEV(\"label\", {\n        htmlFor: \"password\",\n        children: \"Password\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 62,\n        columnNumber: 17\n      }, this), /*#__PURE__*/_jsxDEV(\"input\", {\n        type: \"password\",\n        name: \"password\",\n        autoComplete: \"off\",\n        value: formik.values.password,\n        onChange: formik.handleChange,\n        onBlur: formik.handleBlur\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 63,\n        columnNumber: 17\n      }, this), formik.touched.password && formik.errors.password ? /*#__PURE__*/_jsxDEV(\"p\", {\n        style: {\n          color: \"red\"\n        },\n        children: formik.errors.password\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 71,\n        columnNumber: 70\n      }, this) : null, /*#__PURE__*/_jsxDEV(\"button\", {\n        type: \"submit\",\n        children: \"Login\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 72,\n        columnNumber: 17\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 50,\n      columnNumber: 13\n    }, this)]\n  }, void 0, true, {\n    fileName: _jsxFileName,\n    lineNumber: 48,\n    columnNumber: 9\n  }, this);\n}\n_s(Login, \"m/uhDe9/BPt6fpKrx2ZhEGZKjV0=\", false, function () {\n  return [useHistory, useDispatch, useFormik];\n});\n_c = Login;\nexport default Login;\nvar _c;\n$RefreshReg$(_c, \"Login\");","map":{"version":3,"names":["React","useState","useFormik","yup","useHistory","useDispatch","setUser","jsxDEV","_jsxDEV","Login","_s","showError","setShowError","history","dispatch","formSchema","object","shape","username","string","required","password","formik","initialValues","validationSchema","onSubmit","values","fetch","method","headers","body","JSON","stringify","then","r","status","json","user","push","children","fileName","_jsxFileName","lineNumber","columnNumber","handleSubmit","style","color","htmlFor","type","name","autoComplete","value","onChange","handleChange","onBlur","handleBlur","touched","errors","_c","$RefreshReg$"],"sources":["/home/hoziest/Development/code/phase-5/phase-5-project/client/src/components/Login.js"],"sourcesContent":["import React, { useState } from \"react\";\nimport { useFormik } from \"formik\";\nimport * as yup from \"yup\";\nimport { useHistory } from \"react-router-dom\"\nimport { useDispatch } from \"react-redux\";\nimport { setUser } from \"../features/user/userSlice\";\n\nfunction Login() {\n    const [showError, setShowError] = useState(false);\n    const history = useHistory();\n    const dispatch = useDispatch();\n\n    const formSchema = yup.object().shape({\n        username: yup.string()\n            .required(\"Please enter your username\"),\n        password: yup.string()\n            .required(\"Please enter your password\")\n    });\n\n    const formik = useFormik({\n        initialValues: {\n            username: \"\",\n            password: \"\"\n        },\n        validationSchema: formSchema,\n        onSubmit: (values) => {\n            fetch(\"/login\", {\n                method: \"POST\",\n                headers: {\n                    \"Content-Type\": \"application/json\"\n                },\n                body: JSON.stringify(values, null, 2)\n            }).then((r) => {\n                if (r.status === 200) {\n                    r.json()\n                    .then((user) => {\n                        dispatch(setUser(user))\n                        history.push(\"/\")\n                    })\n                } else if (r.status === 401) {\n                    setShowError(true)\n                }\n            });\n        }\n    });\n\n    return (\n        <div>\n            <h1>Login</h1>\n            <form onSubmit={formik.handleSubmit}>\n                {showError ? <p style={{ color: \"red\" }}>Invalid username or password</p> : null}\n                <label htmlFor=\"username\">Username</label>\n                <input\n                    type=\"text\"\n                    name=\"username\"\n                    autoComplete=\"off\"\n                    value={formik.values.username}\n                    onChange={formik.handleChange}\n                    onBlur={formik.handleBlur}\n                />\n                {formik.touched.username && formik.errors.username ? <p style={{ color: \"red\" }}>{formik.errors.username}</p> : null}\n                <label htmlFor=\"password\">Password</label>\n                <input \n                    type=\"password\"\n                    name=\"password\"\n                    autoComplete=\"off\"\n                    value={formik.values.password}\n                    onChange={formik.handleChange}\n                    onBlur={formik.handleBlur}\n                />\n                {formik.touched.password && formik.errors.password ? <p style={{ color: \"red\" }}>{formik.errors.password}</p> : null}\n                <button type=\"submit\">Login</button>\n            </form>\n        </div>\n    );\n}\n\nexport default Login;"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}