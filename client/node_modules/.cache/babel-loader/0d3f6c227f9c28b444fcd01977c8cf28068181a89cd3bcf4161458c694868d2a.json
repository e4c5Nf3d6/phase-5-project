{"ast":null,"code":"var _jsxFileName = \"/home/hoziest/Development/code/phase-5/phase-5-project/client/src/components/Login.js\",\n  _s = $RefreshSig$();\nimport React, { useState } from \"react\";\nimport { useFormik } from \"formik\";\nimport * as yup from \"yup\";\nimport { useHistory, Redirect } from \"react-router-dom\";\nimport { useDispatch } from \"react-redux\";\nimport { useSelector } from \"react-redux\";\nimport { setUser } from \"../features/user/userSlice\";\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nfunction Login() {\n  _s();\n  const [showError, setShowError] = useState(false);\n  const history = useHistory();\n  const dispatch = useDispatch();\n  const user = useSelector(state => state.user);\n  if (user.username) {\n    return /*#__PURE__*/_jsxDEV(Redirect, {\n      to: \"/\"\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 16,\n      columnNumber: 16\n    }, this);\n  }\n  const formSchema = yup.object().shape({\n    username: yup.string().required(\"Please enter your username\"),\n    password: yup.string().required(\"Please enter your password\")\n  });\n  const formik = useFormik({\n    initialValues: {\n      username: \"\",\n      password: \"\"\n    },\n    validationSchema: formSchema,\n    onSubmit: values => {\n      fetch(\"/login\", {\n        method: \"POST\",\n        headers: {\n          \"Content-Type\": \"application/json\"\n        },\n        body: JSON.stringify(values, null, 2)\n      }).then(r => {\n        if (r.status === 200) {\n          r.json().then(user => {\n            dispatch(setUser(user));\n            history.push(\"/\");\n          });\n        } else if (r.status === 401) {\n          setShowError(true);\n        }\n      });\n    }\n  });\n  return /*#__PURE__*/_jsxDEV(\"div\", {\n    children: [/*#__PURE__*/_jsxDEV(\"h1\", {\n      children: \"Login\"\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 55,\n      columnNumber: 13\n    }, this), /*#__PURE__*/_jsxDEV(\"form\", {\n      onSubmit: formik.handleSubmit,\n      children: [showError ? /*#__PURE__*/_jsxDEV(\"p\", {\n        style: {\n          color: \"red\"\n        },\n        children: \"Invalid username or password\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 57,\n        columnNumber: 30\n      }, this) : null, /*#__PURE__*/_jsxDEV(\"label\", {\n        htmlFor: \"username\",\n        children: \"Username\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 58,\n        columnNumber: 17\n      }, this), /*#__PURE__*/_jsxDEV(\"input\", {\n        type: \"text\",\n        name: \"username\",\n        autoComplete: \"off\",\n        value: formik.values.username,\n        onChange: formik.handleChange,\n        onBlur: formik.handleBlur\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 59,\n        columnNumber: 17\n      }, this), formik.touched.username && formik.errors.username ? /*#__PURE__*/_jsxDEV(\"p\", {\n        style: {\n          color: \"red\"\n        },\n        children: formik.errors.username\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 67,\n        columnNumber: 70\n      }, this) : null, /*#__PURE__*/_jsxDEV(\"label\", {\n        htmlFor: \"password\",\n        children: \"Password\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 68,\n        columnNumber: 17\n      }, this), /*#__PURE__*/_jsxDEV(\"input\", {\n        type: \"password\",\n        name: \"password\",\n        autoComplete: \"off\",\n        value: formik.values.password,\n        onChange: formik.handleChange,\n        onBlur: formik.handleBlur\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 69,\n        columnNumber: 17\n      }, this), formik.touched.password && formik.errors.password ? /*#__PURE__*/_jsxDEV(\"p\", {\n        style: {\n          color: \"red\"\n        },\n        children: formik.errors.password\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 77,\n        columnNumber: 70\n      }, this) : null, /*#__PURE__*/_jsxDEV(\"button\", {\n        type: \"submit\",\n        children: \"Login\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 78,\n        columnNumber: 17\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 56,\n      columnNumber: 13\n    }, this)]\n  }, void 0, true, {\n    fileName: _jsxFileName,\n    lineNumber: 54,\n    columnNumber: 9\n  }, this);\n}\n_s(Login, \"skkNPcCSW2Rp5qGE/YVQcPdEyKQ=\", false, function () {\n  return [useHistory, useDispatch, useSelector, useFormik];\n});\n_c = Login;\nexport default Login;\nvar _c;\n$RefreshReg$(_c, \"Login\");","map":{"version":3,"names":["React","useState","useFormik","yup","useHistory","Redirect","useDispatch","useSelector","setUser","jsxDEV","_jsxDEV","Login","_s","showError","setShowError","history","dispatch","user","state","username","to","fileName","_jsxFileName","lineNumber","columnNumber","formSchema","object","shape","string","required","password","formik","initialValues","validationSchema","onSubmit","values","fetch","method","headers","body","JSON","stringify","then","r","status","json","push","children","handleSubmit","style","color","htmlFor","type","name","autoComplete","value","onChange","handleChange","onBlur","handleBlur","touched","errors","_c","$RefreshReg$"],"sources":["/home/hoziest/Development/code/phase-5/phase-5-project/client/src/components/Login.js"],"sourcesContent":["import React, { useState } from \"react\";\nimport { useFormik } from \"formik\";\nimport * as yup from \"yup\";\nimport { useHistory, Redirect } from \"react-router-dom\"\nimport { useDispatch } from \"react-redux\";\nimport { useSelector } from \"react-redux\";\nimport { setUser } from \"../features/user/userSlice\";\n\nfunction Login() {\n    const [showError, setShowError] = useState(false);\n    const history = useHistory();\n    const dispatch = useDispatch();\n    const user = useSelector((state) => state.user)\n\n    if (user.username) {\n        return <Redirect to=\"/\" />\n    }\n\n    const formSchema = yup.object().shape({\n        username: yup.string()\n            .required(\"Please enter your username\"),\n        password: yup.string()\n            .required(\"Please enter your password\")\n    });\n\n    const formik = useFormik({\n        initialValues: {\n            username: \"\",\n            password: \"\"\n        },\n        validationSchema: formSchema,\n        onSubmit: (values) => {\n            fetch(\"/login\", {\n                method: \"POST\",\n                headers: {\n                    \"Content-Type\": \"application/json\"\n                },\n                body: JSON.stringify(values, null, 2)\n            }).then((r) => {\n                if (r.status === 200) {\n                    r.json()\n                    .then((user) => {\n                        dispatch(setUser(user))\n                        history.push(\"/\")\n                    })\n                } else if (r.status === 401) {\n                    setShowError(true)\n                }\n            });\n        }\n    });\n\n    return (\n        <div>\n            <h1>Login</h1>\n            <form onSubmit={formik.handleSubmit}>\n                {showError ? <p style={{ color: \"red\" }}>Invalid username or password</p> : null}\n                <label htmlFor=\"username\">Username</label>\n                <input\n                    type=\"text\"\n                    name=\"username\"\n                    autoComplete=\"off\"\n                    value={formik.values.username}\n                    onChange={formik.handleChange}\n                    onBlur={formik.handleBlur}\n                />\n                {formik.touched.username && formik.errors.username ? <p style={{ color: \"red\" }}>{formik.errors.username}</p> : null}\n                <label htmlFor=\"password\">Password</label>\n                <input \n                    type=\"password\"\n                    name=\"password\"\n                    autoComplete=\"off\"\n                    value={formik.values.password}\n                    onChange={formik.handleChange}\n                    onBlur={formik.handleBlur}\n                />\n                {formik.touched.password && formik.errors.password ? <p style={{ color: \"red\" }}>{formik.errors.password}</p> : null}\n                <button type=\"submit\">Login</button>\n            </form>\n        </div>\n    );\n}\n\nexport default Login;"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}